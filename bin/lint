#!/usr/bin/env bash

MODE="check"

if [[ "$1" == "fix" ]]; then
  MODE="fix"
fi

echo "Lint mode: $MODE"

echo "Running Rubocop..."
if [[ "$MODE" == "fix" ]]; then
  bundle exec rubocop -A
else
  bundle exec rubocop
fi

echo "Running Prettier..."
if [[ "$MODE" == "fix" ]]; then
  yarn prettier --write '**/*.{js,ts,jsx,tsx,css,scss}'
else
  yarn prettier --check '**/*.{js,ts,jsx,tsx,css,scss}'
fi

echo "Running ERB-Lint..."
if [[ "$MODE" == "fix" ]]; then
  bundle exec erb_lint --lint-all --autocorrect
else
  bundle exec erb_lint --lint-all
fi

echo "Linting complete!"
