<% title "No.#{@question.id} の解説" %>
<% summary = @question.explanation.tr("\n", " ").truncate(80) %>
<% set_meta_tags description: summary %>

<main class="min-h-screen bg-slate-50 py-12 px-4 sm:px-6 relative pb-24">

  <div class="max-w-3xl mx-auto space-y-8">

    <% if current_user %>
      <%= render "shared/result_status", is_correct: @is_correct %>
    <% end %>

    <%= render "shared/terminal_display",
        content: @question.content,
        label: "Question.php (Review)" %>

    <%= render "shared/choices_feedback",
        question: @question,
        user_choice_ids: @user_answer_ids %>

    <%= render "shared/reference_info", question: @question %>

    <% unless current_user %>
      <div class="mt-8 pt-8 border-t border-slate-200">
        <%= link_to root_path, class: "w-full flex items-center justify-center px-4 py-3 border border-transparent text-base font-bold rounded-xl text-white bg-indigo-600 hover:bg-indigo-700 transition-all shadow-md" do %>
          <%= inline_svg_tag "icons/logout.svg", class: "w-5 h-5 mr-2", aria_hidden: true %>
          ログインして学習をはじめる
        <% end %>
      </div>
    <% end %>

  </div>

  <% if current_user %>
    <div data-controller="sticky-nav"
        data-sticky-nav-footer-selector-value="#global-footer"
        class="fixed bottom-0 left-0 w-full z-50 pb-6 pointer-events-none transition-transform duration-300">

      <div class="max-w-3xl mx-auto px-4 sm:px-6">
        <%= render "questions/navigation" %>
      </div>
    </div>
  <% end %>

</main>
