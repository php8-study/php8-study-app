<%= form_with model: [:admin, @question], class: "space-y-6 p-8 bg-white shadow-lg rounded-xl", data: { controller: "nested-form" }


 do |f| %>

  <template data-nested-form-target="template">
    <%= f.fields_for :question_choices, QuestionChoice.new, child_index: "NEW_RECORD"






 do |choice_fields| %>
      <%= render "admin/question_choices/choice_fields", f: choice_fields
 %>
    <% end %>
  </template>

  <div class="space-y-2">
    <%= f.label :content, "問題文", class: admin_form_label_class
 %>
    <%= f.text_area :content, rows: 4, class: admin_form_text_area_class
 %>
  </div>

  <div class="space-y-2">
    <%= f.label :official_page, "参照ページ", class: admin_form_label_class
 %>
    <%= f.text_field :official_page, class: admin_form_text_area_class, placeholder: "例: 152ページ, P.25-28"
 %>
  </div>

  <div class="space-y-2">
    <%= f.label :category_id, "カテゴリー", class: admin_form_label_class
 %>
    <%= f.collection_select :category_id, Category.all, :id, :name, {}, class: admin_form_text_area_class
 %>
  </div>

  <div class="space-y-2">
    <%= f.label :explanation, "解説", class: admin_form_label_class
 %>
    <%= f.text_area :explanation, rows: 6, class: admin_form_text_area_class, placeholder: "将来的に実装予定なので、現在は無記入を許可"
 %>
  </div>

  <div class="border-t border-slate-200 pt-6 mt-6">
    <h3 class="text-lg font-medium text-slate-900 mb-4">選択肢</h3>

    <div id="choices_container" data-nested-form-target="target">
      <%= f.fields_for :question_choices






 do |choice_fields| %>
        <%= render "admin/question_choices/choice_fields", f: choice_fields
 %>
      <% end %>
    </div>

    <div class="mt-4">
      <button type="button" data-action="nested-form#add" class="inline-flex items-center text-sm font-medium text-indigo-600 hover:text-indigo-800 transition-colors">
        ＋ 選択肢を追加
      </button>
    </div>
  </div>

  <div class="pt-6 border-t border-slate-200 mt-6 flex justify-end gap-4">
    <%= link_to "キャンセル", admin_questions_path,
        class: "inline-flex items-center text-gray-700 bg-gray-200 px-6 py-2 rounded-lg font-semibold hover:bg-gray-300 transition-colors"
 %>

    <%= f.submit "保存する",
        class: "bg-indigo-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-indigo-700 cursor-pointer transition-colors"
 %>
  </div>
<% end %>
