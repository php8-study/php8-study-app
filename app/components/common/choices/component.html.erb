<fieldset class="space-y-3">
  <legend class="sr-only">選択肢</legend>

  <% @question.question_choices.each do |choice| %>
    <label class="group relative flex items-start p-4 cursor-pointer bg-white rounded-xl border-2 border-transparent shadow-sm hover:shadow-md transition-all duration-200 focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500">
      <div class="flex items-center h-6">
        <%= check_box_tag checkbox_name(choice),
            choice.id,
            checked?(choice),
            id: "choice_#{choice.id}",
            class: "peer w-5 h-5 border-slate-300 rounded transition-colors focus:ring-0",
            disabled: @disabled,
            data: { answer_guard_target: "checkbox" } %>
      </div>

      <div class="ml-4 flex-1">
        <span class="<%= text_classes %>">
          <%= choice.content %>
        </span>
      </div>

      <div class="absolute inset-0 rounded-xl border-2 border-indigo-500 opacity-0 peer-checked:opacity-100 pointer-events-none transition-opacity duration-200"></div>
    </label>
  <% end %>
</fieldset>
